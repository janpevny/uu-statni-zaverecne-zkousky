# 7. Mockování

## Definice a účel mockování

**Co je to mockování?**

Mockování je technika **simulace závislostí** v softwaru pomocí falešných objektů (mock objects) místo skutečných implementací.

* **Mock objekty** - falešné implementace rozhraní nebo tříd
* **Stub** - poskytuje předem definované odpovědi
* **Fake** - zjednodušená implementace s business logikou
* **Spy** - zachycuje informace o volání

**Účel mockování:**

* Izolace testovaného kódu
* Testování bez externích závislostí
* Rychlejší a spolehlivější testy
* Prototypování před implementací backendu

## Frontend mockování bez backendu

**Prototypování frontendu bez backendu**

Vývoj uživatelského rozhraní **před dokončením backend API** pomocí simulovaných dat.

* **Statická mock data** - JSON soubory s ukázkovými daty
* **Mock API servery** - simulace REST/GraphQL endpointů
* **Service Workers** - interceptování HTTP požadavků
* **HTTP interceptory** - modifikace síťových volání

**Výhody:**

* Paralelní vývoj frontend/backend týmů
* Rychlejší iterace UI prototypů
* Testování edge cases
* Konzistentní vývojové prostředí

## Mock servery a nástroje

**Nástroje pro mock servery**

Specializované nástroje pro **simulaci API endpointů** během vývoje frontendu.

* **JSON Server** - rychlý REST API z JSON souboru
* **Postman Mock Server** - cloudové API mockování
* **WireMock** - pokročilé HTTP mockování (Java)
* **Mockoon** - desktop aplikace pro API mocking

**Online služby:**

* **MockAPI** - cloud-based RESTful API
* **Mocky.io** - jednoduchý HTTP mock
* **Httpbin** - testování HTTP klientů

**Konfigurace:** Definice endpointů, HTTP metod, response formátů

## Interceptory a middleware

**HTTP interceptory a middleware**

Techniky pro **zachycení a modifikaci** síťových požadavků na úrovni klienta.

* **Axios interceptors** - request/response middleware
* **Fetch API wrapper** - vlastní implementace s mocky
* **MSW (Mock Service Worker)** - browser/Node.js mocking
* **Nock** - HTTP server mocking pro Node.js

**Service Worker approach:**

* Registrace SW pro zachycení requestů
* Conditional mocking (dev/prod režim)
* Offline-first development

**Implementace:** Podmíněné mockování podle environment proměnných

## Testovací mockování

**Mockování v testech**

Použití mock objektů pro **izolované unit testy** frontend komponent a služeb.

* **Jest mocks** - automatické a manuální mockování
* **Vitest** - modern testing s mock podporou
* **Sinon.js** - spies, stubs, mocks pro JavaScript
* **Testing Library** - mock functions pro React/Vue testy

**Typy testovacích mocků:**

* **Module mocks** - mockování celých modulů
* **Function mocks** - simulace jednotlivých funkcí
* **API client mocks** - fake HTTP responses

**Příklad:** `jest.fn()`, `vi.mock()`, `sinon.stub()`

## Component mockování

**Mockování React/Vue komponent**

Techniki pro **nahrazení složitých komponent** jednoduššími mock implementacemi.

* **Shallow rendering** - testování bez child komponent
* **Mock komponenty** - zjednodušené implementace
* **Props drilling simulation** - testování data flow
* **Context providers mocking** - fake aplikační stav

**React Testing Library:**

* **render()** - s mock providers
* **screen.getBy()** - queries na mock elementy
* **userEvent** - simulace uživatelských interakcí

**Výhoda:** Rychlé testy bez komplexních závislostí

## Data mockování strategie

**Strategie pro mockování dat**

Přístupy k **generování a správě** testovacích a vývojových dat.

* **Fixtures** - statické JSON soubory s ukázkovými daty
* **Factories** - generátory objektů s náhodnými daty
* **Seeding** - automatické naplnění databáze
* **Faker.js** - generování realistických fake dat

**Best practices:**

* **Realistic data** - podobná produkčním datům
* **Edge cases** - dlouhé texty, speciální znaky
* **Consistent schemas** - dodržení API kontraktů
* **Versioning** - správa verzí mock dat

**Nástroje:** Factory Bot, Chance.js, JSON Schema Faker

## Mock API design patterns

**Design patterns pro Mock API**

Osvědčené vzory pro **navrhování mock rozhraní** během prototypování.

* **Contract-first** - definice API před implementací
* **OpenAPI/Swagger** - specifikace a mockování z docs
* **GraphQL mocking** - schema-based fake resolvers
* **Response templates** - dynamické generování odpovědí

**Patterns:**

* **CRUD operations** - standardní REST endpoint simulace
* **Pagination mocking** - velkých datových sad
* **Error scenarios** - simulace chybových stavů
* **Latency simulation** - real-world network delays

**Výsledek:** Realistic API behavior před backend implementací
