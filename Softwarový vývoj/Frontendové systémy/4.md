# 4. Komunikace se serverem

## HTTP protokol a REST API

**HTTP protokol a REST API**

**HTTP protokol**

* **GET** - načítání dat ze serveru
* **POST** - vytváření nových zdrojů
* **PUT** - aktualizace celého zdroje
* **PATCH** - částečná aktualizace zdroje
* **DELETE** - mazání zdrojů

**REST API principy**

* **Stateless** - každý požadavek obsahuje všechny potřebné informace
* **Uniform Interface** - jednotné rozhraní pro všechny operace
* **Resource-based** - vše je reprezentováno jako zdroj s URL
* **Cacheable** - odpovědi lze cachovat pro vyšší výkon

**Praktické příklady**

* GET /api/users - seznam všech uživatelů
* POST /api/users - vytvoření nového uživatele
* PUT /api/users/123 - aktualizace uživatele s ID 123

## AJAX a Fetch API

**AJAX a Fetch API**

**AJAX (Asynchronous JavaScript and XML)**

* **XMLHttpRequest** - starší způsob asynchronní komunikace
* **Asynchronní** - neblokuje uživatelské rozhraní
* **Částečné aktualizace** - možnost aktualizovat pouze část stránky
* **Různé formáty** - JSON, XML, HTML, plain text

**Fetch API**

* **Modernější přístup** - nativní JavaScript API
* **Promise-based** - využívá Promises pro asynchronní operace
* **Lepší error handling** - detailnější zpracování chyb
* **Flexibilnější** - snadnější konfigurace requestů

**Příklad Fetch API**

* fetch('/api/data').then(response => response.json())
* Podporuje async/await syntaxi
* Automatické parsování JSON odpovědí

## Axios a HTTP knihovny

**Axios a HTTP knihovny**

**Axios knihovna**

* **Promise-based** - moderní asynchronní přístup
* **Request/Response interceptors** - middleware pro zpracování
* **Automatic JSON parsing** - automatické převody dat
* **Request timeout** - ochrana proti visícím requestům
* **CSRF protection** - vestavěná ochrana

**Výhody Axios**

* **Jednodušší syntax** - méně kódu než čistý Fetch
* **Širší podpora** - funguje i ve starších prohlížečích
* **Globální konfigurace** - nastavení pro celou aplikaci
* **Error handling** - lepší zpracování HTTP chyb

**Alternativy**

* **Ky** - lightweight HTTP klient
* **Got** - pro Node.js aplikace
* **Superagent** - starší alternativa k Axios

## WebSockets a real-time komunikace

**WebSockets a real-time komunikace**

**WebSocket protokol**

* **Full-duplex** - obousměrná komunikace v reálném čase
* **Persistent connection** - trvalé spojení mezi klientem a serverem
* **Low latency** - minimální zpoždění
* **Upgrade z HTTP** - začíná jako HTTP request

**Použití WebSockets**

* **Chat aplikace** - okamžité doručování zpráv
* **Live data feeds** - aktualizace kurzů, sportovní výsledky
* **Collaborative editing** - společná editace dokumentů
* **Gaming** - multiplayer hry v reálném čase

**Implementace a knihovny**

* **Socket.IO** - populární knihovna s fallbacky
* **Native WebSocket API** - vestavěná podpora v prohlížečích
* **SignalR** - Microsoft řešení pro .NET

## JSON parsing a data transformace

**JSON parsing a data transformace**

**JSON (JavaScript Object Notation)**

* **Lightweight formát** - menší než XML
* **Human readable** - snadno čitelný pro programátory
* **Native JavaScript support** - přirozená podpora
* **Language independent** - podporován většinou jazyků

**JSON operace v JavaScriptu**

* **JSON.parse()** - převod JSON stringu na objekt
* **JSON.stringify()** - převod objektu na JSON string
* **Error handling** - try/catch pro nevalidní JSON
* **Reviver/Replacer funkce** - custom transformace při parsingu

**Data transformace**

* **Array.map()** - transformace arrays
* **Object destructuring** - extrakce potřebných dat
* **Normalizace dat** - převod na konzistentní formát

## Error handling a retry mechanismy

**Error handling a retry mechanismy**

**Typy chyb v komunikaci**

* **Network errors** - výpadky připojení, timeout
* **HTTP errors** - 4xx (client), 5xx (server) status kódy
* **Parsing errors** - nevalidní JSON, neočekávaná data
* **Application errors** - business logic chyby

**Error handling strategie**

* **Try/catch blocks** - zachycení synchronních chyb
* **Promise rejection handling** - .catch() nebo try/catch s async/await
* **Status code checking** - kontrola HTTP status kódů
* **User-friendly messages** - překlad technických chyb

**Retry mechanismy**

* **Exponential backoff** - postupné zvyšování intervalu
* **Circuit breaker** - dočasné vypnutí při opakovaných chybách
* **Timeout handling** - nastavení maximální doby čekání

## Caching a optimalizace požadavků

**Caching a optimalizace požadavků**

**HTTP Caching**

* **Cache-Control headers** - řízení cache chování
* **ETag** - validace změn obsahu
* **Last-Modified** - timestamp poslední změny
* **Browser cache** - automatické ukládání odpovědí

**Aplikační caching**

* **Memory cache** - ukládání v paměti aplikace
* **LocalStorage/SessionStorage** - lokální úložiště prohlížeče
* **Service Workers** - offline caching strategie
* **CDN** - geograficky distribuované cache

**Optimalizace požadavků**

* **Batch requests** - sloučení více požadavků
* **Pagination** - postupné načítání dat
* **Compression** - gzip/brotli komprese
* **Request debouncing** - omezení frekvence požadavků

## GraphQL a alternativní přístupy

**GraphQL a alternativní přístupy**

**GraphQL**

* **Single endpoint** - jeden URL pro všechny operace
* **Flexible queries** - klient určuje, která data chce
* **Type system** - silně typovaná schémata
* **Real-time subscriptions** - live data updates
* **Introspection** - self-documenting API

**Výhody GraphQL**

* **Reduced over-fetching** - pouze požadovaná data
* **Single round trip** - více zdrojů v jednom requestu
* **Versionless** - evoluce bez verzování
* **Developer experience** - lepší nástroje pro development

**Alternativní přístupy**

* **gRPC** - vysokovýkonné RPC
* **Server-Sent Events** - jednosměrný stream
* **SOAP** - starší XML-based protokol
