# 17. Práce s binárními daty

## Upload a download binárních dat

**Upload a download binárních dat**

* **Multipart/form-data** - standard pro upload souborů přes HTTP
* **Base64 kódování** - reprezentace binárních dat v textové podobě
* **Streaming upload** - postupné nahrávání velkých souborů
* **Content-Type headers** - specifikace typu binárních dat
* **MIME typy** - identifikace formátu souborů (image/jpeg, application/pdf)

**Praktické příklady:**

* Express.js s multer middleware
* Fetch API s FormData
* Axios s blob/arrayBuffer

## Persistence binárních dat

**Persistence binárních dat**

* **Buffer objekty** - Node.js reprezentace binárních dat v paměti
* **ArrayBuffer a TypedArrays** - nízkoúrovňová práce s binárními daty
* **Blob API** - webový standard pro práci s binárními objekty
* **Database storage** - ukládání jako BLOB/BYTEA typy
* **File system storage** - ukládání do souborů na disk

**Úložiště:**

* PostgreSQL BYTEA
* MySQL BLOB
* MongoDB GridFS
* Cloud storage (AWS S3, Google Cloud)

## Node.js fs modul

**Node.js fs modul**

* **fs.readFile/writeFile** - čtení a zápis celých souborů
* **fs.createReadStream/WriteStream** - streamování velkých souborů
* **fs.stat** - získání metadata souboru (velikost, datum)
* **fs.access** - kontrola existence a oprávnění
* **fs.mkdir/rmdir** - správa adresářů

**Synchronní vs Asynchronní:**

* fs.readFileSync() - blokující
* fs.readFile() - callback-based
* fs.promises.readFile() - Promise-based

## Node.js stream modul

**Node.js stream modul**

* **Readable streams** - čtení dat po částech
* **Writable streams** - zápis dat po částech
* **Transform streams** - transformace dat za běhu
* **Pipeline** - propojení streamů s error handlingem
* **Backpressure** - řízení toku dat při rozdílných rychlostech

**Výhody streamů:**

* Nízká spotřeba paměti
* Rychlejší zpracování velkých souborů
* Možnost paralelního zpracování

## Async/await základy

**Async/await základy**

* **async function** - deklarace asynchronní funkce
* **await klíčové slovo** - čekání na Promise
* **Error handling** - try/catch bloky pro async kód
* **Return values** - async funkce vždy vrací Promise
* **Paralelní execution** - Promise.all() pro současné operace

**Příklad:**

* async function readFile() { try { const data = await fs.promises.readFile('file.txt'); } catch(err) { console.error(err); } }

## Promise API

**Promise API**

* **Promise konstruktor** - new Promise((resolve, reject) => {})
* **then/catch/finally** - chainování Promise operací
* **Promise.all()** - čekání na všechny Promise
* **Promise.race()** - první dokončený Promise
* **Promise.allSettled()** - čekání na všechny bez ohledu na chyby

**Stavy Promise:**

1. **Pending** - čeká na dokončení
2. **Fulfilled** - úspěšně dokončen
3. **Rejected** - dokončen s chybou

## JSON parsing a stringifikace

**JSON parsing a stringifikace**

* **JSON.parse()** - převod JSON stringu na objekt
* **JSON.stringify()** - převod objektu na JSON string
* **Reviver function** - custom transformace při parsingu
* **Replacer function** - custom transformace při stringifikaci
* **Space parameter** - formátování výstupu s odsazením

**Error handling:**

* SyntaxError při nevalidním JSON
* try/catch bloky pro bezpečný parsing
* Validace před zpracováním

## Pokročilé JSON operace

**Pokročilé JSON operace**

* **JSON Schema validation** - validace struktury dat
* **JSON Patch** - atomické změny v JSON dokumentech
* **JSON Pointer** - adresování částí JSON dokumentu
* **Streaming JSON parsing** - zpracování velkých JSON souborů
* **Custom serialization** - toJSON() metoda pro objekty

**Knihovny:**

* Ajv - JSON schema validator
* fast-json-stringify - rychlá serialization
* JSONStream - streaming parser
