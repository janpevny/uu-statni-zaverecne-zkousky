# 9. Vizuální modelování a UML diagramy

## Formální vs neformální modelování

**Formální vs. neformální modelování**

**Neformální modelování:**

* **Volná forma** - sketche, whiteboard diagramy, poznámky
* **Rychlé** - pro brainstorming a komunikaci v týmu
* **Flexibilní** - bez striktních pravidel
* **Příklady:** hand-drawn diagramy, mind mapy, flowcharty

**Formální modelování:**

* **Standardizované notace** - UML, BPMN, ER diagramy
* **Přesná sémantika** - jednoznačný význam symbolů
* **Generování kódu** - možnost automatizace
* **Nástroje:** Enterprise Architect, Visual Paradigm, Lucidchart

## UML notace a uuBML

**UML (Unified Modeling Language)**

* **Standardizovaný jazyk** - OMG standard pro modelování software
* **14 typů diagramů** - strukturální a behaviorální
* **Verzování:** UML 2.5.1 (aktuální)
* **Nástroje:** PlantUML, StarUML, MagicDraw

**uuBML (Unicorn Universe Business Modeling Language):**

* **Rozšíření UML** - pro business procesy a organizační struktury
* **Zaměření na byznys** - méně technické, více procesní
* **Integrace s UML** - propojení business a IT vrstvy

## Třídní diagram

**Class Diagram (Třídní diagram)**

**Základní elementy:**

* **Třída** - obdélník se jménem, atributy, metodami
* **Viditelnost:** + public, - private, # protected, ~ package
* **Atributy:** jméno: typ = defaultní\_hodnota
* **Metody:** jméno(parametry): návratový\_typ

**Vztahy:**

* **Asociace** - plná čára (používá)
* **Dědičnost** - šipka s prázdným trojúhelníkem
* **Implementace** - přerušovaná čára s trojúhelníkem
* **Kompozice** - plný kosočtverec (vlastní)
* **Agregace** - prázdný kosočtverec (obsahuje)

**Praktický příklad - Knihovna:**

```
┌─────────────────┐    1      *  ┌─────────────────┐
│    Knihovna     │◆─────────────│      Kniha      │
├─────────────────┤              ├─────────────────┤
│ - název: String │              │ - isbn: String  │
│ - adresa: String│              │ - název: String │
├─────────────────┤              │ - rok: int      │
│ + otevřít()     │              ├─────────────────┤
│ + zavřít()      │              │ + vypůjčit()    │
└─────────────────┘              │ + vrátit()      │
                                 └─────────────────┘
                                           △
                                           │
                        ┌──────────────────┼──────────────────┐
                        │                                     │
                ┌─────────────────┐                 ┌─────────────────┐
                │ElektronickáKniha│                 │  FyzickáKniha   │
                ├─────────────────┤                 ├─────────────────┤
                │ - formát: String│                 │ - pozice: String│
                │ - velikost: int │                 │ - stav: String  │
                ├─────────────────┤                 ├─────────────────┤
                │ + stáhnout()    │                 │ + zkontrolovat()│
                └─────────────────┘                 └─────────────────┘
```

**Vysvětlení vztahů:**
- **Kompozice** (◆): Knihovna vlastní knihy, bez knihovny knihy neexistují
- **Dědičnost** (△): ElektronickáKniha a FyzickáKniha dědí od Kniha

## Use Case diagram

**Use Case Diagram (Diagram případů užití)**

**Komponenty:**

* **Aktér** - panáček (uživatel, externí systém)
* **Use Case** - elipsa (funkcionalita systému)
* **Systém** - obdélník ohraničující use cases
* **Asociace** - čára mezi aktérem a use case

**Rozšířené vztahy:**

* **Include** - povinné zahrnutí jiného use case
* **Extend** - volitelné rozšíření use case
* **Generalizace** - dědičnost mezi aktéry/use cases

**Příklady aktérů:** Zákazník, Administrátor, Platební systém

**Praktický příklad - ATM systém:**

```
                    Zákazník
                       👤
                       │
        ┌──────────────┼──────────────┐
        │              │              │
        │              │              │
   (Zkontrolovat)  (Vybrat hotovost) (Vložit peníze)
      zůstatek         │              │
        │              │              │
        │         ┌────────────┐      │
        └─────────┤            ├──────┘
                  │ ATM Systém │
                  │            │◄──────── include ──────┐
                  └─────┬──────┘                        │
                        │                        (Ověřit PIN)
                        │ include                      │
                        │                              │
                        ▼                              │
                 (Vytisknout účtenku) ─────────────────┘
                        │
                        │
                   👤 Technik
                 (Doplnit hotovost)
```

**Vysvětlení vztahů:**
- **Include**: Ověřit PIN je povinné pro všechny operace
- **Extend**: Vytisknout účtenku je volitelné rozšíření
- **Aktéři**: Zákazník (primární), Technik (sekundární)

## Activity a State diagramy

**Activity Diagram (Diagram aktivit)**

* **Počáteční uzel** - plný černý kruh
* **Aktivita** - zaoblený obdélník
* **Rozhodování** - kosočtverec s podmínkami
* **Spojení/Rozdělení** - černá čára (fork/join)
* **Konečný uzel** - kruh s černým středem

**Praktický příklad - Zpracování objednávky (s paralelními aktivitami):**

```
                        ●  (Start)
                        │
                        ▼
            ╭─────────────────────────╮
            │  Přijmout objednávku    │
            ╰─────────────────────────╯
                        │
                        ▼
                   ╱─────────╲
                  ╱ Skladem?  ╲
                 ╱─────────────╲
                ╱               ╲
               /                 \
           [ANO] ▼               ▼ [NE]
    ╭─────────────────╮    ╭─────────────────╮
    │ Rezervovat zboží│    │ Objednat u      │
    ╰─────────────────╯    │ dodavatele      │
                │          ╰─────────────────╯
                │                   │
                │                   ▼
                │          ╭─────────────────╮
                │          │ Čekat na dodání │
                │          ╰─────────────────╯
                │                   │
                └─────────┬─────────┘
                          ▼
                 ╭═════════════════╮  ─────  Fork (rozdělení)
                 ║                 ║
      ┌──────────╫─────────────────╫──────────┐
      ▼          ║                 ║          ▼
╭──────────╮     ║  PARALELNĚ      ║    ╭──────────╮
│ Vystavit │     ║                 ║    │ Připravit│
│ fakturu  │     ║                 ║    │ balíček  │
╰──────────╯     ║                 ║    ╰──────────╯
      │          ║                 ║          │
      └──────────╫─────────────────╫──────────┘
                 ║                 ║
                 ╰═════════════════╯  ─────  Join (spojení)
                          │
                          ▼
                ╭─────────────────────╮
                │ Předat ke  doručení │
                ╰─────────────────────╯
                          │
                          ▼
                     ╱─────────╲
                    ╱ Doručeno? ╲
                   ╱─────────────╲
                  ╱               ╲
                 /                 \
             [ANO] ▼               ▼ [NE]
        ╭─────────────────╮  ╭─────────────────╮
        │ Dokončit        │  │ Vrátit do       │
        │ objednávku      │  │ skladu          │
        ╰─────────────────╯  ╰─────────────────╯
                │                     │
                ▼                     ▼
              ●──●                   ●──●
            (Konec)                 (Konec)
```

**Vysvětlení elementů:**
- **●** Start/End uzly
- **◊** Decision point (rozhodování)
- **╭─╮** Activity (aktivita)
- **╔═╗** Fork/Join bar (paralelní zpracování)
- **[podmínka]** Guard condition (podmínka přechodu)

**State Diagram (Stavový diagram)**

* **Stav** - zaoblený obdélník se jménem
* **Přechod** - šipka s událostí/akcí
* **Počáteční stav** - plný černý kruh
* **Konečný stav** - kruh s černým středem
* **Složené stavy** - vnořené stavové diagramy

**Praktický příklad - Activity Diagram (Přihlášení do systému):**

```
                    ●  (Start)
                    │
                    ▼
         ╭─────────────────────╮
         │ Zadat uživatelské   │
         │ jméno a heslo       │
         ╰─────────────────────╯
                    │
                    ▼
                 ◊─────────◊
                /  Platné?  \
               ◊─────────────◊
              /               \
        [ANO] ▼                 ▼ [NE]
   ╭─────────────────╮   ╭─────────────────╮
   │ Přihlásit       │   │ Zobrazit chybovou│
   │ uživatele       │   │ zprávu          │
   ╰─────────────────╯   ╰─────────────────╯
             │                     │
             ▼                     │
    ╭─────────────────╮            │
    │ Přesměrovat na  │            │
    │ hlavní stránku  │            │
    ╰─────────────────╯            │
             │                     │
             ▼                     │
          ●──●  (Konec)            │
                                  │
                 ◊────────────────◊
                /   Zkusit znovu?  \
               ◊───────────────────◊
              /                     \
        [ANO] ▼                      ▼ [NE]
             │                    ●──●
             └──────────────────────┘
```

**State Diagram (Stav objednávky):**

```
       ●  (Start)
       │
       ▼
  ╭─────────╮  vytvořit objednávku   ╭─────────╮
  │         │ ────────────────────►  │ Nová    │
  │  Prázdná│                        │         │
  │         │                        │         │
  ╰─────────╯                        ╰─────────╯
                                          │ potvrdit
                                          ▼
                                     ╭─────────╮
                 zrušit              │ Potvrzená│
                ◄─────────────────── │         │
               │                     ╰─────────╯
               │                          │ zaplatit
               ▼                          ▼
          ╭─────────╮                ╭─────────╮
          │ Zrušená │                │ Zaplacená│
          │         │                │         │
          ╰─────────╯                ╰─────────╯
               │                          │ odeslat
               │                          ▼
               │                     ╭─────────╮
               │                     │ Odeslána│
               │                     │         │
               │                     ╰─────────╯
               │                          │ doručit
               │                          ▼
               │                     ╭─────────╮
               │                     │Dokončena│
               │                     │         │
               │                     ╰─────────╯
               │                          │
               ▼                          ▼
            ●──●  (Konec)             ●──●
```

## Sekvenční diagram

**Sequence Diagram (Sekvenční diagram)**

**Struktura:**

* **Aktér/Objekt** - obdélník v horní části
* **Životní čára** - svislá přerušovaná čára
* **Aktivace** - úzký obdélník na životní čáře
* **Zpráva** - šipka mezi životními čarami

**Typy zpráv:**

* **Synchronní** - plná šipka (čeká na odpověď)
* **Asynchronní** - otevřená šipka (nečeká)
* **Odpověď** - přerušovaná šipka
* **Vytvoření** - šipka k novému objektu
* **Zničení** - X na konci životní čáry

**Praktický příklad - Objednání knihy online:**

```
Zákazník    WebServer   Database    EmailService   PlatebniBrana
   │            │           │            │               │
   │ objednat() │           │            │               │
   │───────────>│           │            │               │
   │            │           │            │               │
   │            │ save()    │            │               │
   │            │──────────>│            │               │
   │            │           │            │               │
   │            │    OK     │            │               │
   │            │<──────────│            │               │
   │            │           │            │               │
   │            │           │ sendEmail()│               │
   │            │           │───────────>│               │
   │            │           │            │               │
   │            │ platba()  │            │               │
   │            │───────────┼────────────┼──────────────>│
   │            │           │            │               │
   │            │           │            │      OK       │
   │            │<──────────┼────────────┼───────────────│
   │            │           │            │               │
   │ potvrzení  │           │            │               │
   │<───────────│           │            │               │
   │            │           │            │               │
```

**Vysvětlení toku:**
1. Zákazník odešle objednávku na WebServer (synchronní)
2. WebServer uloží data do Database (synchronní)
3. Database potvrdí uložení
4. WebServer odešle email (asynchronní)
5. WebServer zpracuje platbu přes PlatebniBrana (synchronní)
6. Zákazník dostane potvrzení objednávky

## Package a Component diagramy

**Package Diagram (Diagram balíčků)**

* **Package** - složka s názvem (namespace, modul)
* **Závislost** - přerušovaná šipka <>
* **Import** - přerušovaná šipka <>
* **Merge** - přerušovaná šipka <>
* **Vnořené balíčky** - hierarchická struktura

**Component Diagram (Komponentový diagram)**

* **Komponenta** - obdélník s <> nebo ikonou
* **Interface** - kruh (provided) nebo půlkruh (required)
* **Port** - malý čtverec na hraně komponenty
* **Connector** - propojení mezi porty
* **Artifacts** - soubory, knihovny, executables

**Praktický příklad - Package Diagram (E-shop struktura):**

```
╔══════════════════════╗
║      E-shop         ║
║    Application      ║
╚══════════════════════╝
           │
           │ depends
           ▼
┌──────────────────────┐  
│       Frontend       │  
│    (presentation)    │  
└──────────────────────┘  
           │
           │ uses
           ▼
┌──────────────────────┐    ┌──────────────────────┐
│     Controllers      │────│       Services       │
│     (web layer)      │    │   (business logic)   │
└──────────────────────┘    └──────────────────────┘
           │                          │
           │                          │ uses
           ▼                          ▼
┌──────────────────────┐    ┌──────────────────────┐
│      Models          │    │    Repositories      │
│   (domain objects)   │    │   (data access)      │
└──────────────────────┘    └──────────────────────┘
                                       │
                                       │ accesses
                                       ▼
                              ┌──────────────────────┐
                              │     Database         │
                              │      (MySQL)         │
                              └──────────────────────┘
```

**Component Diagram (Webová aplikace):**

```
┌────────────────────────┐      ┌────────────────────────┐
│    <<component>>       │      │    <<component>>       │
│    WebBrowser          │─────▶│    WebServer           │
│                        │ HTTP │                        │
└────────────────────────┘      └────────────┬───────────┘
                                             │
                                             │ JDBC
                                             ▼
                                ┌────────────────────────┐
                                │    <<component>>       │
                                │    DatabaseServer      │
                                │                        │
                                └────────────────────────┘

Legenda:
─────▶  dependency
   ○    provided interface  
   ◐    required interface
```

**Vysvětlení:**
- **Package**: Skupiny souvisejících tříd a modulů
- **Component**: Samostatné nasaditelné jednotky
- **Dependency**: Směr závislostí mezi komponentami

## Nástroje a best practices

**UML nástroje a doporučení**

**Populární nástroje:**

* **PlantUML** - textový zápis, integrace s IDE
* **Draw.io/Lucidchart** - online diagramy
* **Enterprise Architect** - profesionální modelování
* **Visual Paradigm** - komplexní UML suite
* **StarUML** - open source alternativa

**Best Practices:**

* **Správná úroveň detailu** - dle účelu diagramu
* **Konzistentní pojmenování** - podle konvencí
* **Udržování aktuálnosti** - synchronizace s kódem
* **Dokumentace účelu** - proč diagram existuje
