# 3. Dokumentace backendu

## Typická struktura dokumentace

**Struktura dokumentace backendu**

**Hlavní sekce:**

1. **API Reference** - detailní popis všech endpoints
2. **Architecture Overview** - celková architektura systému
3. **Data Models** - struktura entit a vazeb
4. **Authentication & Authorization** - zabezpečení API
5. **Error Handling** - kódy chyb a jejich zpracování

**Formáty dokumentace:**

* **OpenAPI/Swagger** - standardizovaná API dokumentace
* **Markdown** - README, guides, tutorials
* **JavaDoc/JSDoc** - inline dokumentace kódu
* **Postman Collections** - testovatelné API příklady

**Výhody strukturované dokumentace:**

* Rychlejší onboarding nových vývojářů
* Snížení chyb při integraci
* Lepší komunikace mezi týmy
* Automatické generování klientských knihoven

**Nástroje:** Swagger UI, Redoc, GitBook, Confluence

## API dokumentace a specifikace

**API dokumentace a specifikace**

**OpenAPI (Swagger) specifikace:**

* **Endpoints** - URL, HTTP metody, parametry
* **Request/Response schemas** - struktura dat
* **Status codes** - HTTP response kódy
* **Authentication** - typy autentizace (Bearer, API Key)

**Klíčové informace v API docs:**

1. **Base URL** - základní adresa API
2. **Versioning** - strategie verzování API
3. **Rate limiting** - omezení počtu požadavků
4. **Examples** - ukázkové požadavky a odpovědi
5. **Error codes** - seznam možných chyb

**Automatické generování:**

* Z anotací v kódu (Spring Boot, FastAPI)
* Z TypeScript definic (NestJS)
* Z schema-first přístupů

**Výhody:**

* Interaktivní testování API
* Automatické generování klientů
* Konzistence dokumentace s kódem
* Snadná integrace třetích stran

**Nástroje:** Swagger UI, Postman, Insomnia, curl examples

## Perzistentní vrstva dokumentace

**Dokumentace perzistentní vrsty**

**Database Schema Documentation:**

* **ER diagramy** - vizuální reprezentace entit a vazeb
* **Table definitions** - struktura tabulek, datové typy
* **Indexes** - definice indexů pro optimalizaci
* **Constraints** - omezení integrity (PK, FK, unique)
* **Migration scripts** - evoluce databázového schématu

**ORM/ODM dokumentace:**

* **Entity models** - mapování objektů na tabulky
* **Relationships** - One-to-One, One-to-Many, Many-to-Many
* **Query examples** - typické dotazy a jejich optimalizace
* **Custom queries** - raw SQL nebo NoSQL dotazy

**Performance dokumentace:**

* Query performance guidelines
* Indexing strategies
* Connection pooling settings
* Caching mechanisms

**Nástroje:**

dbdocs, MySQL Workbench, pgAdmin, Liquibase docs

**Příklad technologií:** Hibernate (JPA), Sequelize, TypeORM, Prisma

## DAO pattern dokumentace

**Data Access Object (DAO) Pattern**

**Definice DAO:**

Návrhový vzor poskytující abstraktní rozhraní pro přístup k datům, skrývající komplexitu databázových operací

**Struktura DAO:**

* **Interface** - definuje kontakt (CRUD operace)
* **Implementation** - konkrétní implementace pro databázi
* **Entity/Model** - reprezentace dat
* **Exception handling** - zpracování databázových chyb

**Typické DAO operace:**

1. **Create** - save(), insert()
2. **Read** - findById(), findAll(), findBy...()
3. **Update** - update(), merge()
4. **Delete** - delete(), remove()

**Výhody DAO pattern:**

* Oddělení business logiky od data access logiky
* Testovatelnost - mock DAO implementace
* Flexibilita - změna databáze bez změny business kódu
* Znovupoužitelnost

**Příklady implementace:** Spring Data JPA, MyBatis, JOOQ

## Repository pattern

**Repository Pattern**

**Definice Repository:**

Návrhový vzor zapouzdřující logiku potřebnou k přístupu ke zdrojům dat. Centralizuje běžnou funkcionalitu přístupu k datům a poskytuje lepší udržitelnost

**Rozdíl DAO vs Repository:**

* **DAO** - více zaměřený na databázové operace
* **Repository** - více doménově orientovaný, může kombinovat více DAO
* **Repository** - může implementovat in-memory kolekce rozhraní

**Repository metody:**

* **Query methods** - findByUsername(), findByDateRange()
* **Custom queries** - @Query anotace
* **Derived queries** - automatické generování z názvu metody
* **Paging & Sorting** - Pageable parametry

**Výhody:**

* Domain-driven design podpora
* Testovatelnost s mock repositories
* Centralizace query logiky
* Type-safe queries

**Příklady:** Spring Data JPA Repository, Entity Framework Repository

## Služby a API endpoints

**Dokumentace služeb (Services)**

**Service Layer charakteristiky:**

* **Business logic** - implementace obchodních pravidel
* **Transaction management** - správa databázových transakcí
* **Orchestrace** - koordinace více DAO/Repository
* **Validace** - kontrola vstupních dat

**Typy služeb:**

1. **Application Services** - use case implementace
2. **Domain Services** - doménová logika
3. **Infrastructure Services** - external APIs, email, atd.

**Dokumentace služeb:**

* Popis zodpovědností jednotlivých služeb
* Input/Output specifikace
* Exception handling strategie
* Transaction boundaries
* Dependencies mezi službami

**Service Documentation Patterns:**

* JavaDoc/JSDoc komentáře
* Unit test jako dokumentace
* Architecture Decision Records (ADR)

**Příklady frameworků:** Spring Service, NestJS Providers, .NET Services

## REST API endpoints

**REST API Endpoints dokumentace**

**HTTP Methods mapping:**

* **GET** - čtení dat (/users, /users/{id})
* **POST** - vytváření nových zdrojů (/users)
* **PUT** - úplná aktualizace (/users/{id})
* **PATCH** - částečná aktualizace (/users/{id})
* **DELETE** - mazání zdrojů (/users/{id})

**Endpoint dokumentace obsahuje:**

1. **URL pattern** - cesta a parametry
2. **HTTP method** - GET, POST, PUT, DELETE
3. **Request parameters** - query, path, body
4. **Response format** - JSON schema
5. **Status codes** - 200, 201, 400, 401, 404, 500
6. **Authentication** - required headers, tokens

**RESTful naming conventions:**

* Používání podstatných jmen (ne sloves)
* Plurál pro kolekce (/users, ne /user)
* Hierarchické vztahy (/users/{id}/posts)
* Query parametry pro filtrování, stránkování

**Příklady tools:** Postman, Swagger UI, HTTPie, curl

## GraphQL API dokumentace

**GraphQL API dokumentace**

**GraphQL specifika:**

* **Schema-first** - dokumentace je část schema definice
* **Type system** - silné typování všech dat
* **Introspection** - self-documenting API
* **Single endpoint** - většinou /graphql

**Schema documentation:**

1. **Types** - objekty, skaláry, enums
2. **Queries** - čtení dat
3. **Mutations** - modifikace dat
4. **Subscriptions** - real-time data
5. **Fields** - popis jednotlivých polí

**Výhody GraphQL docs:**

* Automatické generování z schema
* Interactive playground (GraphiQL)
* Type safety
* Přesná specifikace dat

**GraphQL dokumentační nástroje:**

* **GraphiQL** - interaktivní query editor
* **Apollo Studio** - cloud-based docs
* **GraphQL Playground** - pokročilý IDE
* **Spectacle** - statická dokumentace

**Příklad technologií:** Apollo Server, GraphQL-Java, Hasura
