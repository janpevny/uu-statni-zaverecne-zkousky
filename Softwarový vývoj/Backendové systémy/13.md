# 13. Správa a revize zdrojových kódů

## Source code repository (GIT)

**Source code repository a GIT**

**Definice:**

Systém pro ukládání a správu verzí zdrojového kódu s komplexní historií všech změn

**Základní koncepty GIT:**

* **Repository** - úložiště kódu s kompletní historií
* **Commit** - snímek změn s unikátním hashem
* **Branch** - paralelní vývojová větev
* **Working Directory** - aktuální pracovní prostor
* **Staging Area** - připravené změny pro commit

**Výhody GIT:**

* Distribuovaný systém
* Offline práce
* Rychlé operace
* Komplexní branching/merging
* Kryptografická integrita

**Základní příkazy:**

* git init, clone, add, commit
* git push, pull, fetch
* git branch, checkout, merge

## Verzování a branching strategie

**Verzování a branching strategie**

**Význam verzování:**

* Sledování změn v čase
* Možnost návratu k předchozím verzím
* Paralelní vývoj funkcí
* Koordinace týmové práce

**Typy branchů:**

1. **Main/Master** - produkční kód
2. **Development** - vývojová větev
3. **Feature branches** - nové funkce
4. **Hotfix branches** - kritické opravy
5. **Release branches** - příprava release

**Výhody branchování:**

* Izolace změn
* Paralelní vývoj
* Experimentování bez rizika
* Code review workflow

**Nevýhody:**

* Možnost merge konfliktů
* Složitější správa mnoha branchů
* Potřeba disciplíny v týmu
* Long-lived branches mohou způsobit problémy

**Best practices:**

* Krátké názvy branchů
* Pravidelné mergování
* Clean history pomocí rebase

## GitFlow workflow

**GitFlow workflow model**

**Definice:**

Robustní branching model definující specifické role pro různé typy branchů a jejich interakce

**Hlavní branche:**

* **master** - produkční kód, vždy stabilní
* **develop** - hlavní vývojová větev

**Pomocné branche:**

1. **feature/\*** - nové funkce (z develop → do develop)
2. **release/\*** - příprava nových verzí
3. **hotfix/\*** - kritické opravy (z master)

**Workflow proces:**

1. Feature branch z develop
2. Merge feature do develop
3. Release branch z develop
4. Release merge do master a develop
5. Hotfix přímo z master

**Výhody:**

* Jasná struktura a proces
* Oddělení vývoje od produkce
* Podpora paralelního vývoje
* Snadná správa release

**Nevýhody:**

* Může být příliš komplex pro malé týmy
* Long-lived branches
* Pomalší release cyklus

## GitHub Flow a další modely

**GitHub Flow a alternativní modely**

**GitHub Flow:**

1. Vytvoř branch z main
2. Přidej commits
3. Otevři Pull Request
4. Diskutuj a review
5. Merge do main
6. Deploy

**GitLab Flow:**

* Kombinuje Git flow a GitHub flow
* Environment branches (staging, production)
* Upstream first policy

**Trunk-based development:**

* Všichni commitují do main/trunk
* Krátké feature branches (max 2 dny)
* Feature flags pro nehotové funkce
* Časté integrace

**Výběr modelu podle:**

* Velikost týmu
* Frekvence deploymentů
* Složitost produktu
* Úroveň zkušeností týmu

**Výhody jednoduchých modelů:**

* Rychlejší development cyklus
* Méně overhead
* Continuous deployment friendly

## Code review proces

**Code review proces**

**Definice:**

Systematické hodnocení zdrojového kódu před jeho začleněním do hlavní větve

**Typy review:**

* **Pull/Merge Request** - před mergem
* **Pre-commit review** - před commitem
* **Post-commit review** - po commitu
* **Formal inspection** - strukturovaný proces

**Co kontrolovat:**

1. Funkčnost a správnost kódu
2. Dodržování coding standards
3. Výkon a bezpečnost
4. Testovatelnost
5. Dokumentace a komentáře
6. Architecture a design patterns

**Výhody:**

* Kvalitnější kód
* Sdílení znalostí v týmu
* Odhalení bugů před nasazením
* Mentoring mladších vývojářů

**Nevýhody:**

* Časově náročný proces
* Možné zdržení developmentu
* Subjektivní hodnocení
* Riziko konfliktů v týmu

**Nástroje:** GitHub, GitLab, Bitbucket, Azure DevOps, Gerrit

## Statická analýza kódu

**Statická analýza kódu**

**Definice:**

Automatizovaná analýza zdrojového kódu bez jeho spuštění za účelem odhalení potenciálních problémů

**Typy kontrol:**

* **Syntax errors** - syntaktické chyby
* **Code smells** - problematické vzory
* **Security vulnerabilities** - bezpečnostní díry
* **Performance issues** - výkonnostní problémy
* **Coding standards** - dodržování konvencí

**Kategorie nástrojů:**

1. **Linters** - ESLint, JSHint, PyLint
2. **Security scanners** - SonarQube, Checkmarx
3. **Code quality** - CodeClimate, DeepCode
4. **IDE plugins** - integrované do vývojových prostředí

**Výhody:**

* Rychlé odhalení problémů
* Konzistentní kvalita kódu
* Bezpečnostní kontroly
* Automatizace v CI/CD

**Nevýhody:**

* False positive výsledky
* Nemůže odhalit logické chyby
* Potřeba konfigurace pravidel
* Možnost ignorování výstražných hlášení

## CI/CD integrace a automatizace

**CI/CD integrace pro správu kódu**

**Continuous Integration:**

* Automatické buildování při každém commitu
* Spouštění testů
* Statická analýza kódu
* Notifikace o chybách

**Automatizované kontroly:**

1. **Pre-commit hooks** - před commitem
2. **Pre-push hooks** - před pushom
3. **CI pipeline checks** - v CI/CD systému
4. **Quality gates** - blokování merge při problémech

**Typický CI/CD workflow:**

1. Developer push → CI trigger
2. Build & compile
3. Run unit tests
4. Static analysis
5. Security scan
6. Deploy to staging
7. Integration tests
8. Deploy to production

**Výhody automatizace:**

* Konzistentní proces
* Rychlá zpětná vazba
* Redukce lidských chyb
* Rychlejší time-to-market

**Nástroje:** Jenkins, GitHub Actions, GitLab CI, Azure Pipelines, CircleCI

## Správa závislostí a artefaktů

**Správa závislostí a artefaktů**

**Package management:**

* **JavaScript:** npm, Yarn
* **Java:** Maven, Gradle
* **Python:** pip, poetry
* **.NET:** NuGet
* **PHP:** Composer

**Artifact repositories:**

* **Public:** Maven Central, npm registry
* **Private:** Nexus, Artifactory, Azure Artifacts
* **Container registries:** Docker Hub, ECR, ACR

**Dependency management problémy:**

1. **Version conflicts** - konfliktní verze
2. **Transitive dependencies** - nepřímé závislosti
3. **Security vulnerabilities** - zranitelné balíčky
4. **License compliance** - licenční kompatibilita

**Best practices:**

* Lock files pro přesné verze
* Pravidelné aktualizace
* Security scanning
* Minimal dependencies

**Nástroje pro analýzu:**

* Snyk, WhiteSource
* OWASP Dependency Check
* npm audit, pip-audit
