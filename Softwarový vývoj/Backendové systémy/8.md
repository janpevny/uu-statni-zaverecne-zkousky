# 8. Nerelační databáze

## Základy NoSQL databází

**NoSQL databáze (Not only SQL)**

**Definice:**

Databázové systémy, které nepoužívají relační model a SQL jako primární přístup k datům

**Hlavní charakteristiky:**

* **Schema-free** nebo **Schema-flexible** - flexibilní struktura dat
* **Horizontální škálovatelnost** - snadné přidávání serverů
* **BASE princip** - Basically Available, Soft state, Eventual consistency
* **CAP theorem** - kompromis mezi Consistency, Availability, Partition tolerance

**Výhody:**

* Vysoká škálovatelnost a výkon
* Flexibilita při změnách datového modelu
* Nižší náklady na hardware
* Vhodné pro big data a real-time aplikace

**Nevýhody:**

* Omezená konzistence dat
* Složitější dotazování než SQL
* Méně standardizované
* Nedostatek ACID transakcí

**Kdy použít:** Velká množství dat, rychlé čtení/zápis, flexibilní schema, distribuované systémy

## Dokumentové databáze

**Dokumentové databáze**

**Princip:**

Ukládají data ve formě dokumentů (JSON, BSON, XML), každý dokument obsahuje páry klíč-hodnota

**Charakteristiky:**

* **Schema-less** - dokumenty nemusí mít stejnou strukturu
* **Vnořené objekty** - podporují komplexní datové struktury
* **Indexování** - možnost indexovat libovolná pole
* **Dotazování** - dotazy na struktura dokumentů

**Populární systémy:**

* **MongoDB** - nejpopulárnější, BSON formát
* **CouchDB** - Apache projekt, HTTP API
* **Amazon DocumentDB** - managed MongoDB kompatibilní
* **Firebase Firestore** - Google cloud databáze

**Výhody:**

* Flexibilní schema
* Rychlé dotazování na dokumenty
* Snadné mapování na objekty v aplikaci
* Horizontální škálovatelnost

**Nevýhody:**

* Problém s complex joins
* Možná duplicita dat
* Velikost dokumentů může růst

**Použití:** E-commerce, content management, real-time aplikace, API backends

## Key-Value databáze

**Key-Value databáze**

**Princip:**

Nejjednodušší NoSQL model - každý záznam je pár klíč-hodnota, podobný hash table

**Charakteristiky:**

* **Jednoduchý model** - pouze klíč a hodnota
* **Vysoký výkon** - optimalizované pro rychlé čtení/zápis
* **Škálovatelnost** - snadné distributed storage
* **Omezené dotazování** - pouze podle klíče

**Populární systémy:**

* **Redis** - in-memory, podporuje různé datové typy
* **Amazon DynamoDB** - managed NoSQL databáze
* **Riak** - distribuovaná key-value databáze
* **Memcached** - primárně pro caching

**Výhody:**

* Extrémně vysoký výkon
* Jednoduchá implementace
* Lineární škálovatelnost
* Nízká latence

**Nevýhody:**

* Omezené dotazovací možnosti
* Nelze dotazovat podle hodnoty
* Žádné joins nebo relationships
* Složitější pro komplexní data

**Použití:** Caching, session storage, shopping carts, user preferences, real-time recommendations

## Column-family databáze

**Column-family databáze (Wide Column)**

**Princip:**

Data jsou organizována v column families (podobné tabulkám), ale schéma je flexibilní na úrovni řádků

**Struktura:**

* **Keyspace** - podobné databázi
* **Column Family** - podobné tabulce
* **Row Key** - identifikátor řádku
* **Columns** - dynamické sloupce s časovými razítky

**Populární systémy:**

* **Cassandra** - Apache projekt, vysoká dostupnost
* **HBase** - Hadoop ekosystém, real-time čtení/zápis
* **Amazon SimpleDB** - managed služba
* **Google Bigtable** - původní inspiration

**Výhody:**

* Vysoká škálovatelnost
* Rychlé zápisy
* Flexibilní schema
* Časová řada dat

**Nevýhody:**

* Omezené dotazování
* Složitější než key-value
* Learning curve

**Použití:** Time series data, IoT aplikace, log data, analytics, messaging systems

## Grafové databáze

**Grafové databáze**

**Princip:**

Data jsou reprezentována jako graf s uzly (nodes), hranami (edges/relationships) a vlastnostmi (properties)

**Komponenty:**

* **Nodes** - entity (osoby, místa, věci)
* **Edges/Relationships** - spojení mezi uzly
* **Properties** - atributy uzlů a hran
* **Labels** - kategorizace uzlů

**Populární systémy:**

* **Neo4j** - nejpopulárnější, Cypher query jazyk
* **Amazon Neptune** - managed graf databáze
* **ArangoDB** - multi-model including graphs
* **JanusGraph** - open source, distribuovaná

**Výhody:**

* Optimalizované pro relationships
* Intuitivní pro propojená data
* Rychlé traversal queries
* Flexibilní model

**Nevýhody:**

* Complexity scaling
* Specializované use cases
* Výkon závisí na struktuře

**Použití:** Social networks, recommendation engines, fraud detection, knowledge graphs, network analysis

## RDF a objektové databáze

**RDF a objektové databáze**

**RDF databáze (Resource Description Framework):**

* **Triple store** - subject, predicate, object triplets
* **SPARQL** - dotazovací jazyk pro RDF
* **Ontologie** - formální specifikace konceptů
* **Semantic Web** - propojená data na webu

**RDF systémy:**

* **Apache Jena** - Java framework pro RDF
* **Virtuoso** - multi-model včetně RDF
* **Stardog** - enterprise RDF databáze

**Objektové databáze:**

* **Direct object persistence** - objekty uložené přímo
* **Object Query Language (OQL)**
* **Inheritance** - podpora dědičnosti
* **Complex objects** - vnořené objekty

**Objektové systémy:**

* **db4o** - embedded object databáze
* **ObjectDB** - JPA compliant
* **Versant** - enterprise řešení

**Použití RDF:** Semantic web, knowledge management, linked data

**Použití objektové:** CAD systémy, scientific applications, complex domain models

## Výběr typu databáze

**Kdy použít který typ NoSQL databáze**

**Dokumentové databáze:**

* Semi-strukturovaná data
* Rychlý prototyping
* Content management
* Real-time aplikace
* JSON/BSON data format

**Key-Value databáze:**

* Jednoduchá lookup operace
* Caching layer
* Session management
* Real-time recommendations
* Vysoký výkon požadavek

**Column-family:**

* Time series data
* Write-heavy aplikace
* Big data analytics
* IoT data streams
* Log data management

**Grafové databáze:**

* Social networks
* Recommendation systems
* Fraud detection
* Network topology
* Knowledge graphs

**Rozhodovací faktory:**

1. **Datová struktura** - jednoduché vs. komplexní relationships
2. **Škálovatelnost** - horizontální vs. vertikální
3. **Konzistence** - ACID vs. eventual consistency
4. **Performance** - read vs. write optimalizace
5. **Query complexity** - jednoduché vs. složité dotazy

## NoSQL vs SQL porovnání

**NoSQL vs SQL - porovnání a rozhodování**

**SQL databáze (RDBMS):**

* **ACID vlastnosti** - Atomicity, Consistency, Isolation, Durability
* **Structured data** - pevné schéma
* **Complex queries** - JOINs, subqueries
* **Vertikální škálování** - výkonnější hardware
* **Maturity** - dlouhá historie, stabilita

**NoSQL databáze:**

* **BASE vlastnosti** - Basically Available, Soft state, Eventual consistency
* **Flexible schema** - semi-structured nebo unstructured data
* **Simple queries** - omezené dotazování
* **Horizontální škálování** - přidávání serverů
* **Modern applications** - big data, real-time

**Použij SQL když:**

* Potřebuješ ACID transakce
* Komplexní vztahy mezi daty
* Structured data s pevným schématem
* Reporting a analytics
* Finanční aplikace

**Použij NoSQL když:**

* Rapid development a prototyping
* Horizontální škálování
* Big data volumes
* Real-time aplikace
* Flexible/evolving data model
