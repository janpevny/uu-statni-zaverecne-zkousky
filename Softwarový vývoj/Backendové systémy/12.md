# 12. Principy testování backendu

## Unit testy

"

**Unit testy (jednotkové testy)**

**Definice:**

Testování nejmenších testovatelných částí aplikace izolovaně od ostatních komponent

**Charakteristiky:**

* **Izolace** - testuje pouze jednu funkci/metodu
* **Rychlost** - běží velmi rychle (milisekundy)
* **Mock objekty** - nahrazují závislosti
* **Deterministické** - stejný vstup = stejný výstup

**Výhody:**

* Rychlá zpětná vazba
* Snadné debugování
* Dokumentace kódu
* Refactoring confidence
* Levné na vytvoření a údržbu

**Co testovat:**

* Business logiku
* Validace a edge cases
* Error handling
* Utility funkce

**Nástroje:** JUnit (Java), pytest (Python), Jest (JavaScript), NUnit (.NET), PHPUnit (PHP)

## Komponentové testy

"

**Komponentové testy (Component Tests)**

**Definice:**

Testování celého komponentu/modulu aplikace s jeho skutečnými závislostmi nebo jejich realistickými náhradami

**Rozsah:**

* **API endpoint** - testování REST/GraphQL endpointů
* **Service vrstva** - testování business services
* **Database operace** - s test databází
* **Message handling** - zpracování zpráv z queues

**Charakteristiky:**

* Reálné databáze (často testovací)
* Skutečné HTTP komunikace
* Testování celého workflow
* Pomalejší než unit testy

**Výhody:**

* Testuje reálné interakce
* Zachycuje integration issues
* Vyšší confidence než unit testy
* Testuje API kontrakt

**Nevýhody:**

* Pomalejší výkon
* Složitější setup a teardown
* Flaky testy při externích závislostech

**Nástroje:** TestContainers, Spring Boot Test, Supertest (Node.js), HttpTest (.NET)

## Integrační testy

"

**Integrační testy (Integration Tests)**

**Definice:**

Testování komunikace a interakce mezi různými částmi systému nebo s externími systémy

**Typy integračních testů:**

* **Big Bang** - testování všech komponent najednou
* **Incremental** - postupné přidávání komponent
* **Top-down** - od high-level k low-level
* **Bottom-up** - od low-level k high-level

**Co testovat:**

* Database integrace
* Externí API komunikace
* Message queue systémy
* File system operace
* Microservices komunikace

**Výhody:**

* Odhaluje interface problémy
* Testuje data flow
* Zachycuje configuration issues
* End-to-end validace

**Nevýhody:**

* Pomalé a drahé
* Složité debugování
* Závislost na externích systémech
* Maintenance overhead

**Strategie:** Test doubles, Contract testing, Test environments

## Funkční testy

"

**Funkční testy (Functional Tests)**

**Definice:**

Testování aplikace z pohledu end-usera, ověřování že systém splňuje business požadavky

**Charakteristiky:**

* **Black-box testing** - neznáme vnitřní implementaci
* **User perspective** - testování user stories
* **End-to-end** - celý workflow
* **Business kritéria** - ověřují requirements

**Typy funkčních testů:**

* **Smoke testy** - základní funkcionalita
* **Sanity testy** - rychlé ověření po změnách
* **Regression testy** - ověření že změny nezlomily existující funkcionalitu
* **User acceptance testy** - finální akceptace

**Výhody:**

* Vysoká confidence
* Business value validation
* Real user scenarios
* Cross-system testing

**Nevýhody:**

* Pomalé a drahé
* Brittle a flaky
* Obtížná lokalizace chyb
* High maintenance

**Nástroje:** Selenium, Cypress, Playwright, Postman, REST Assured

## Výkonnostní testy

"

**Výkonnostní testy (Performance Tests)**

**Typy výkonnostních testů:**

* **Load testing** - testování při normálním zatížení
* **Stress testing** - testování při extrémním zatížení
* **Volume testing** - testování s velkými objemy dat
* **Spike testing** - náhlé zvýšení zátěže
* **Endurance testing** - dlouhodobé zatížení

**Klíčové metriky:**

* **Response time** - doba odezvy
* **Throughput** - počet transakcí za sekundu
* **Concurrent users** - současní uživatelé
* **Resource utilization** - využití CPU/paměti

**Výhody:**

* Identifikace bottlenecks
* Capacity planning
* SLA validation
* Optimalizace výkonu

**Nevýhody:**

* Nákladné na setup
* Potřebují production-like environment
* Časově náročné
* Složité vyhodnocení výsledků

**Nástroje:** JMeter, Gatling, K6, LoadRunner, Artillery, Locust

## Bezpečnostní testy

"

**Bezpečnostní testy (Security Tests)**

**Typy bezpečnostních testů:**

* **Authentication testing** - ověření přihlášení
* **Authorization testing** - kontrola oprávnění
* **SQL Injection testing** - ochrana databáze
* **XSS testing** - Cross-Site Scripting
* **CSRF testing** - Cross-Site Request Forgery
* **Data encryption testing** - šifrování dat

**Oblasti testování:**

* Input validation
* Session management
* Error handling (no sensitive info)
* SSL/TLS konfigurace
* API security
* File upload security

**Automatizované kontroly:**

* Static code analysis
* Dependency vulnerability scanning
* Container security scanning
* Infrastructure security

**Výhody:**

* Včasné odhalení vulnerabilities
* Compliance s security standardy
* Ochrana dat a systémů

**Nevýhody:**

* Vyžaduje bezpečnostní expertise
* False positive/negative
* Časově náročné

**Nástroje:** OWASP ZAP, Burp Suite, SonarQube, Snyk, Checkmarx

## Automatizace testů

"

**Automatizace testů**

**Test Pyramid strategie:**

1. **Unit testy** - 70% (základ pyramidy)
2. **Integration testy** - 20% (střed)
3. **E2E testy** - 10% (vrchol)

**CI/CD integrace:**

* **Pre-commit hooks** - lokální validace
* **Build pipeline** - automatické spouštění testů
* **Deployment gates** - testy jako podmínka nasazení
* **Regression testing** - nightly builds

**Výhody automatizace:**

* Rychlá zpětná vazba
* Konzistentní výsledky
* Úspora času a nákladů
* Continuous quality assurance
* Regression protection

**Best practices:**

* Test data management
* Parallel test execution
* Flaky test handling
* Test reporting a metrics

**Nástroje:** Jenkins, GitHub Actions, GitLab CI, TeamCity, Azure DevOps, CircleCI

## Nástroje a postupy

"

**Testovací nástroje a postupy**

**Testovací frameworky:**

* **Java:** JUnit 5, TestNG, Mockito, Spring Boot Test
* **Python:** pytest, unittest, Mock, FastAPI TestClient
* **JavaScript:** Jest, Mocha, Supertest, Sinon
* **.NET:** xUnit, NUnit, Moq, ASP.NET Core Testing
* **PHP:** PHPUnit, Mockery, Laravel Testing

**Test data management:**

* **Fixtures** - předdefinovaná testovací data
* **Factories** - generování test dat
* **Database seeding** - naplnění test DB
* **Test containers** - izolovaná test prostředí

**Mocking strategie:**

* Mock external services
* Stub expensive operations
* Fake objects pro komplexní závislosti
* Spy pro behavioral verification

**Test reporting:**

* Code coverage metrics
* Test execution reports
* Performance benchmarks
* Trend analysis

**Best practices:**

* AAA pattern (Arrange, Act, Assert)
* Given-When-Then struktura
* Test naming conventions
* Clean up resources
